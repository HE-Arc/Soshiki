{% extends 'SoshikiApp/base.html' %}

{% block title %}Table details{% endblock %}

{% block content %}
<div class="container allPages">

    <div class="row">
        <div class="col-md-4">
            <h1 class="display-4">{{table.name}}<a href="{% url 'table-update' table.pk %}" class="btn fa fa-edit" ></a></h1>
        </div>
    </div>
    <p class="lead text-muted">Manage your project {{ table.name}}.</p>
    <a href="{% url 'list-create' table.pk%}" class="btn btn-default" style="width:100%">Add a list</a>
    <button id="reorder-btn" class="btn btn-warning btn-sm" style="width:100%">Reorder lists</button>
    <button id="save-reorder-btn" class="btn btn-info btn-sm" style="width:100%;display:none;">Save changes</button>
    <hr/>
    <div class="card-columns">
      {% for list in table.list_set.all|dictsort:"position" %}
        <div class="card">
            <h5 id="{{ list.id }}" class="card-header">
                {{ list.name }}
                <a href="{% url 'list-update' table.pk list.pk%}" class="btn fa fa-edit" ></a>
                <a href="{% url 'list-delete' table.pk list.pk%}" class="btn fa fa-remove"></a>
            </h5>
            <div class="card-body">
                {% for card in list.card_set.all|dictsort:"position" %}
                <a href="{% url 'card-detail' table.pk list.pk card.id %}">
                  <div id="{{ card.id }}" class="card list-card">
                    {{card.title}}
                  </div>
                </a>
                {% endfor %}
                <a href="{% url 'card-create' table.pk list.pk%}">
                    <div class="card list-card add_task">
                        Add a task...
                    </div>
                </a>
            </div>
        </div>
      {% endfor %}
    </div>
</div>
{% endblock %}
